---
layout:     post
title:      "深不可测的APNS"
subtitle:   ""
date:       2017-07-06 15:41:00
author:     "易博"
header-img: "img/201705/18/head_bg.JPG"
tags:
    - iOS
---

提到消息推送，那就不得不提及苹果的APNS(Apple Push Notification Service)。我们首先来看一组数据(数据来自互联网)

    1. 苹果在WWDC 2012上宣布每天发送70亿条消息推送
    2. 有分析称在苹果的2019财年，iPhone活跃用户数量将突破10亿

那么你有没有想过，这几年移动互联网的快速发展，APNS推送数据保守估能达到将近千亿的量级，这么大的用户活跃量和巨大的消息推送数目，得多大的服务器来承受？

![](http://www.xttxqjfg.cn/img/201707/06/06003.png)

上面是消息推送的基本流程

    1. App开启消息推送服务，用户配置是否想要收到消息推送
    2. App向APNS注册，APNS向App返回设备码(device token)
    3. App将收到的设备码提供给应用服务器
    4. 当应用服务器想要给App发送消息时，根据设备码将需要发送的内容push到APNS
    5. APNS将消息推送到设备

这个推送是不需要应用开启的情况下可以收到的
